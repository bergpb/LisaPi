{% extends 'base.html' %}
{% block title %}{{ super() }}| Index{% endblock %}}
{% block page %} Home {% endblock %}}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col s12 m6 l4 offset-m3 offset-l4 mt4">
      {% if current_user.id %}
        <h4>Hello {{ current_user.username }}!</h4>
        <p class="mt-3">Please configure your pins in Edit Pins.</p>
        <div id="status">
          Mensagem aqui: {% raw %}{{ status }}{% endraw %}
          <br>
          Processos: {% raw %}{{ status.process }}{% endraw %}
        </div>
      {% else %}
      <div class="col s12 m12 l12 center-align mt1">
        <p>Hello anonymous user, please login.</p>
        <a class="btn btn-primary" href="{{ url_for('login') }}">Login</a>
      </div>
      {% endif %}
    </div>
  </div>
</div>
<script type="text/javascript">
  new Vue({
    el: '#status',
    data () {
      return {
        status: '',
      }
    },
    mounted () {
      this.update;
      this.interval = setInterval(
        this.getData, 1000
      );
    },
    methods: {
      getData: function() {
        axios.get('http://localhost:5000/api/status')
        .then((response) => {
          this.status = response.data
        })
      },
    },
  });
</script>
{% endblock %}
